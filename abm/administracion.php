<?phprequire_once ("clases/producto.php");require_once ("Acciones.php");$alta = isset($_POST["guardar"]) ? TRUE : FALSE;$modificar = isset($_POST["modificar"]) ? TRUE : FALSE;$baja = isset($_POST["eliminar"]) ? TRUE : FALSE;if ($alta) {	//VERIFICO SI HUBO ALGUN ERROR, CHEQUEANDO $uploadOk	if (SeSubioOk($_POST) === FALSE) {		echo "<br/><br/>NO SE PUDO SUBIR EL ARCHIVO.";	} 	else 	{		//MUEVO EL ARCHIVO DEL TEMPORAL AL DESTINO FINAL			if (move_uploaded_file($_FILES["archivo"]["tmp_name"], $destino)) 			{	 							try 				{					$conexion = new PDO("mysql:host=localhost;dbname=productos","root","");				} 				catch (PDOException $e) {					echo $e->getMessage();									}								$value1 = $_POST["codBarra"];				$value2 = $_POST["nombre"];				$value3 = basename($_FILES["archivo"]["name"]);				$statement = $conexion->prepare("INSERT INTO producto (`codigo_barra`, `nombre`, `path_foto`) VALUES (:codBarra,:name,:pathh)");				$statement->bindParam(':codBarra',$value1);				$statement->bindParam(':name',$value2);				$statement->bindParam(':pathh',$value3);				$statement->execute();				//$p = new Producto($_POST["codBarra"],$_POST["nombre"],basename($_FILES["archivo"]["name"]));								if(!$statement->execute())				{					$mensaje = "Lamentablemente ocurrio un error y no se pudo escribir en el archivo.";					include("mensaje.php");				}				else{					$mensaje = "El archivo fue escrito correctamente. PRODUCTO agregado CORRECTAMENTE!!!";					include("mensaje.php");				}				$conexion = NULL;						} 			else 			{				$mensaje = "Lamentablemente ocurri&oacute; un error y no se pudo subir el archivo.";				include("mensaje.php");			}	}}else if($baja){		try 	{		$conexion = new PDO("mysql:host=localhost;dbname=productos","root","");			}	 catch (PDOException $e) {		echo $e->getMessage();	}	var_dump($_POST["codigo"]);	$id = $_POST["codigo"];	$statement = $conexion->prepare("DELETE FROM producto WHERE codigo_barra= :codigo");	$statement->bindParam(':codigo',$id);	if(!$statement->execute())	{		$mensaje = "Lamentablemente ocurrio un error y no se pudo eliminar el producto.";		include("mensaje.php");	}	else{		$mensaje = "La base de datos se actualizo sin problemas. PRODUCTO elimiando CORRECTAMENTE!!!";		include("grilla.php");	}	$conexion = NULL;}else{	if (SeSubioOk($_POST) === FALSE) {		echo "<br/><br/>NO SE PUDO SUBIR EL ARCHIVO.";	} 	else 	{		//MUEVO EL ARCHIVO DEL TEMPORAL AL DESTINO FINAL			if (move_uploaded_file($_FILES["archivo"]["tmp_name"], $destino)) 			{	 							try 				{					$conexion = new PDO("mysql:host=localhost;dbname=productos","root","");				} 				catch (PDOException $e) {					echo $e->getMessage();									}								$oldcodigo = $_POST["oldCode"];				$newcodigo = $_POST["newCode"];				$newnombre = $_POST["newNombre"];				$newpathh = basename($_FILES["archivo"]["name"]);				$statement = $conexion->prepare("UPDATE producto SET UPDATE `producto` SET `codigo_barra`=:newcodBarra,`nombre`=:newNombre,`path_foto`=:newpathh WHERE codigo_barra = :oldcodBarra");				$statement->bindParam(':oldcodBarra',$oldcodigo);				$statement->bindParam(':newcodBarra',$newcodigo);				$statement->bindParam(':newname',$newnombre);				$statement->bindParam(':newpathh',$newpathh);				$statement->execute();								if(!$statement->execute())				{					$mensaje = "Lamentablemente ocurrio un error y no se pudo escribir en el archivo.";					include("mensaje.php");				}				else{					$mensaje = "El archivo fue escrito correctamente. PRODUCTO agregado CORRECTAMENTE!!!";					include("mensaje.php");				}				$conexion = NULL;						} 			else 			{				$mensaje = "Lamentablemente ocurri&oacute; un error y no se pudo subir el archivo.";				include("mensaje.php");			}	}}?>